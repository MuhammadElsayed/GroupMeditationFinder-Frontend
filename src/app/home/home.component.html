<h1>Find group meditations around you!</h1>

<div class = "mapDiv">

<agm-map 
  [latitude]="lat"
  [longitude]="long"
  [zoom]="zoom"
  [disableDefaultUI]="false"
  [zoomControl]="false">

  <agm-marker 
      *ngFor="let g of groups; let i = index"
      (markerClick)="clickedMarker(g.name, i)"
      [latitude]="g.geolocation[1]"
      [longitude]="g.geolocation[0]"
      [label]="g.name"
      [markerDraggable]="false">
      
    <agm-info-window>
      <strong>{{g.name}}</strong>
      <p>{{g.description}}</p>

      <div *ngIf="!g.isEveryday; else elseBlock">
        <p>{{g.datetime | date:'MMMM d, y, h:mm:ss a z'}} </p> 
      </div>
      <ng-template #elseBlock>Everyday - {{g.datetime | date:'h:mm:ss a z'}}</ng-template>
      <div>
        <button class="btn btn-outline-success my-2 my-sm-0" [disabled]="g.isJoined" (click) = "joinGroup(i)">JOIN</button>
      </div>
     </agm-info-window>    
  </agm-marker>

</agm-map>
  
</div>

<div class="descriptionDiv" *ngIf="currentGroup" >
  <h1>{{currentGroup.name}}</h1>
  <ngb-tabset>
    <ngb-tab title="Description">
      <ng-template ngbTabContent>
        <p>{{currentGroup.description}}</p>
        <div *ngIf="!currentGroup.isEveryday; else elseBlock">
          <label>Date: </label> {{currentGroup.datetime | date:'MMMM d, y, h:mm:ss a z'}} 
        </div>
        <ng-template #elseBlock>Everyday - {{currentGroup.datetime | date:'h:mm:ss a z'}}</ng-template>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Active Meditators">
      <ng-template ngbTabContent>
        
        <div class="main-box no-header clearfix">
          <div class="main-box-body clearfix">
              <div class="table-responsive">
                  <table class="table user-list">
                      <thead>
                          <tr>
                          <th><span>User</span></th>
                          <th><span>Joined</span></th>
                          <!-- <th class="text-center"><span>Status</span></th> -->
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>
                                  <!-- <img src="https://bootdey.com/img/Content/user_1.jpg" alt=""> -->
                                  <a href="#" class="user-link">Cem</a>
                              </td>
                              <td align="left">2013/08/12</td>
                              <!-- <td class="text-center">
                                  <span class="label label-default">pending</span>
                              </td> -->
                          </tr>
                          <tr>
                              <td>
                                  <!-- <img src="https://bootdey.com/img/Content/user_3.jpg" alt=""> -->
                                  <a href="#" class="user-link">Jack</a>
                              </td>
                              <td align="left">2013/08/12</td>
                              <!-- <td class="text-center">
                                  <span class="label label-success">Active</span>
                              </td> -->
                          </tr>
                          <tr>
                              <td>
                                  <!-- <img src="https://bootdey.com/img/Content/user_2.jpg" alt=""> -->
                                  <a href="#" class="user-link">Jane</a>
                              </td>
                              <td align="left">2013/08/12</td>
                              <!-- <td class="text-center">
                                  <span class="label label-danger">inactive</span>
                              </td> -->
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>


      </ng-template>
    </ngb-tab>
  </ngb-tabset>
</div>